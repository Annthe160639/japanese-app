@startuml
'https://plantuml.com/sequence-diagram

autonumber

actor User
participant "Frontend" as Frontend
participant "VocabController" as Controller
participant "VocabService" as Service
participant "VocabRepository" as Repository
database Database

autonumber
User -> Frontend++: Thêm từ vựng

Frontend -> Controller++: HTTP POST /api/vocab_add
Controller -> Controller: Validate input
alt Validate thất bại
    Controller --> Frontend: Trả về thông báo lỗi
    Frontend --> User: Hiển thị cho người dùng

else Validate thành công
    Controller -> Service++: Gọi hàm addVocab()
    Service -> Repository++: Gọi hàm saveVocab()
    Repository -> Database++: Insert data
    Database --> Repository--: Trả về kết quả

    alt Insert thành công
        Repository --> Service: Trả về Vocab
        Service --> Controller: Trả về Vocab
        Controller --> Frontend: Trả về Vocab
        Frontend --> User: Trả về thông báo sau khi thêm

    else Insert thất bại
        Repository --> Service: Trả về thông báo lỗi
        deactivate Repository
        Service --> Controller--: Trả về thông báo lỗi
        Controller --> Frontend--: Trả về thông báo lỗi
        Frontend --> User--: Trả về thông báo lỗi
    end
end

@enduml